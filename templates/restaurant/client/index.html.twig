{% extends 'front-office.html.twig' %}


{% block links %} <title>Restaurants</title>{% endblock %}


{% block contenu %}


<main>
    <div class="preloader">
        <div id="cooking">
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div id="area">
                <div id="sides">
                    <div id="pan"></div>
                    <div id="handle"></div>
                </div>
                <div id="pancake">
                    <div id="pastry"></div>
                </div>
            </div>
        </div>
    </div>





    <div class="bread-crumbs-wrapper">
        <div class="container">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#" title="" itemprop="url">Home</a></li>
                <li class="breadcrumb-item"><a href="#" title="" itemprop="url">Search</a></li>
                <li class="breadcrumb-item active">Restaurants Found</li>
            </ol>
        </div>
    </div>

    <section>
        <div class="block gray-bg bottom-padd210 top-padd30">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 col-sm-12 col-lg-12">
                        <div class="sec-box">

                            <div class="sec-wrapper top-padd80">
                                <div class="row">
                                    <div class="col-md-3 col-sm-12 col-lg-3">
                                        <div class="sidebar left">
                                            <div class="widget style2 Search_filters">
                                                <h4 class="widget-title2 sudo-bg-red" itemprop="headline">Search Filters</h4>
                                                <div class="widget-data">
                                                    <ul>
                                                        <li><a href="#" title="" itemprop="url">Fast food</a> <span>30</span></li>
                                                        <li><a href="#" title="" itemprop="url">North Indian</a> <span>28</span></li>
                                                        <li><a href="#" title="" itemprop="url">Chinese</a> <span>25</span></li>
                                                        <li><a href="#" title="" itemprop="url">Bakery</a> <span>11</span></li>
                                                        <li><a href="#" title="" itemprop="url">Mughlai</a> <span>7</span></li>
                                                        <li><a href="#" title="" itemprop="url">Pizza</a> <span>6</span></li>
                                                        <li><a href="#" title="" itemprop="url">Ice Cream</a> <span>6</span></li>
                                                        <li><a href="#" title="" itemprop="url">Rolls</a> <span>6</span></li>
                                                        <li><a href="#" title="" itemprop="url">Cafe</a> <span>5</span></li>
                                                        <li><a href="#" title="" itemprop="url">Italian</a> <span>5</span></li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="widget style2 quick_filters">
                                                <h4 class="widget-title2 sudo-bg-red" itemprop="headline">Quick Filters</h4>
                                                <div class="widget-data">
                                                    <ul>
                                                        <li><span class="radio-box"><input type="radio" name="filter" id="filt1-1"><label for="filt1-1">Promotions</label></span></li>
                                                        <li><span class="radio-box"><input type="radio" name="filter" id="filt1-2"><label for="filt1-2">Bookmarked</label></span></li>
                                                        <li><span class="radio-box"><input type="radio" name="filter" id="filt1-3"><label for="filt1-3">Pure veg</label></span></li>
                                                        <li><span class="radio-box"><input type="radio" name="filter" id="filt1-4"><label for="filt1-4">Free Delivery</label></span></li>
                                                        <li><span class="radio-box"><input type="radio" name="filter" id="filt1-5"><label for="filt1-5">Online Payments</label></span></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div><!--Sidebar -->
                                    </div>

                                    <div class="col-md-9 col-sm-12 col-lg-9">
                                        <div class="title2-wrapper">
                                            <h3 class="marginb-0" itemprop="headline">NOS RESTAURANTS</h3>
                                        </div>

                                        <div class="remove-ext">

                                            <div class="row">

                                                {% for r in restaurant %}

                                                <div class="col-md-6 col-sm-6 col-lg-6">
                                                    <div class="featured-restaurant-box with-bg style2 brd-rd12 wow fadeIn" data-wow-delay="0.1s">
                                                        <div class="featured-restaurant-thumb">
                                                            <a href="restaurant-detail.html" title="" itemprop="url"><img src="assets/front-office/images/logo2.png" alt="most-popular-img1.png" itemprop="image"></a>
                                                        </div>
                                                        <div class="featured-restaurant-info">
                                                            <span class="red-clr">{{ r.adresse }}</span>
                                                            <h4 itemprop="headline"><a href="{{ path('restaurant_showC', {'id': r.id}) }}" itemprop="url">{{ r.nom }}</a></h4>
                                                            <span class="food-types">Type of food: <a href="#" title="" itemprop="url">Apple Juice</a>, <a href="#" title="" itemprop="url">BB.Q</a></span>
                                                            <ul class="post-meta">
                                                                <li><i class="fa fa-check-circle-o"></i> Min order $50</li>
                                                                <li><i class="flaticon-transport"></i> 30min</li>
                                                                <li><i class="flaticon-money"></i> Accepts cash & online payments</li>
                                                            </ul>
                                                            <span class="post-rate yellow-bg brd-rd2"><i class="fa fa-star-o"></i> 4.25</span>
                                                           <a href="{{ path('restaurant_like',{'id': r.id}) }}" class="btn btn-link js-like-link">
                                                               {% if app.user and r.isLikedByUser(app.user) %}
                                                                   <i class="fa fa-heart"></i>
                                                               {% else %}
                                                                   <i class="fa fa-heart-o" aria-hidden="true"></i>
                                                           {% endif %}


                                                               <span class="js-likes">{{ r.favoris | length }}</span>
                                                           <span class="js-label">j'adore</span>
                                                           </a>
                                                            <a class="brd-rd30" href="restaurant-detail.html" title="Order Online"><i class="fa fa-angle-double-right"></i> Order Online</a>
                                                        </div>
                                                    </div>
                                                </div>
                                                {% endfor %}
                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>





</main>
    <!-- Main Wrapper -->
{% endblock %}
{% block javascripts %}

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script>
        function onClickBtnLike(event){
            event.preventDefault();
            const url = this.href;
            const icone = this.querySelector('i');

            const spanCount = this.querySelector('span.js-likes');
            axios.get(url).then(function(response){
                console.log(response);
                console.log(icone.classList.contains('fa-heart-o'));
                if(icone.classList.contains('fa-heart-o')){icone.className ="fa fa-heart";}
                else {icone.className ="fa fa-heart-o";}

                spanCount.textContent = response.data.favoris;

            }).catch(function (error){
                if(error.response.status === 403) {
                    window.alert("il faut se connecter")
                }
                });

        }
        document.querySelectorAll('a.js-like-link').forEach(function(link){
            link.addEventListener('click' , onClickBtnLike);
        })

/*document.querySelectorAll('a.js-like-link').forEach(function (link) {
    link.addEventListener('click',function (event) {
    event.preventDefault();
    const url = this.href;
    const spanCount = this.querySelector('span.js-likes');

    axios.get(url).then(function (response) {
        console.log(response);
        spanCount.textContent = response.data.favoris;
    })



    });

})*/

</script>
{% endblock %}



