{% extends 'front-office.html.twig' %}


{% block links %} <title>Restaurants</title>
    <style>

        .widgetx {
            width: 100%;
            max-width: 430px;
            height: 452px;
            border: 1px solid rgba(0, 0, 0, 0.2);
            background-color: #fff;
            border-radius: 4px;
            overflow: hidden;
            position: relative;
            -webkit-box-shadow: 0px 7px 30px 0px rgba(50, 50, 50, 0.32);
            -moz-box-shadow: 0px 7px 30px 0px rgba(50, 50, 50, 0.32);
            box-shadow: 0px 7px 30px 0px rgba(50, 50, 50, 0.32);
            -webkit-transition: 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
            -moz-transition: 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
            transition: 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        .widget__photo {
            width: 100%;
            height: 300px;
            background: url("https://media.blogto.com/articles/2018290sb-reservebar.jpg?cmd=resize_then_crop&quality=70&w=2048&height=1365") no-repeat center/cover;
            -webkit-transition: 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
            -moz-transition: 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
            transition: 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
            position: relative;
            -webkit-transform: scale(1);
            -moz-transform: scale(1);
            -ms-transform: scale(1);
            -o-transform: scale(1);
            transform: scale(1);
        }

        .widget__photo:after {
            -webkit-transition: 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
            -moz-transition: 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
            transition: 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
            content: "";
            width: 100%;
            height: 100%;
            position: absolute;
            background-color: rgba(0, 0, 0, 0.6);
            top: 0;
            left: 0;
            opacity: 0;
            z-index: 10;
        }

        .widget__details {
            padding: 30px;
            position: relative;
        }

        .widget__badges {
            position: absolute;
            right: 30px;
            top: 30px;
        }

        .widget__badge {
            font-size: 12px;
            display: inline-block;
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.5);
            width: 40px;
            text-align: center;
            padding: 2px 0;
            border-radius: 3px;
        }

        .widget__badge.widget__badge--rating {
            background-color: #14C852;
            border-color: #14C852;
            color: #fff;
        }

        .widget__name {
            font-size: 18px;
            color: rgba(0, 0, 0, 0.8);
            font-weight: 600;
            width: 100%;
            padding: 0 80px 0 0;
        }

        .widget__type {
            font-size: 12px;
            color: rgba(0, 0, 0, 0.6);
        }

        .widget__info span {
            color: rgba(0, 0, 0, 0.7);
            font-size: 14px;
            display: block;
            width: 100%;
            margin-bottom: 4px;
        }

        .widget__info span:first-of-type {
            margin-top: 15px;
        }

        .widget__table {
            width: 100%;
        }

        .widget__table tr td {
            color: rgba(0, 0, 0, 0.7);
            line-height: 25px;
        }

        .widget__table tr td:first-child {
            color: rgba(0, 0, 0, 0.4);
        }

        .widget__overlay {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
        }

        .widget__button {
            cursor: pointer;
            -webkit-transition: 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
            -moz-transition: 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
            transition: 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
            position: absolute;
            margin: 0 auto;
            padding: 10px 0;
            width: 70%;
            background-color: #14C852;
            border-radius: 4px;
            color: #fff;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            font-size: 12px;
            left: 0;
            right: 0;
            top: -40px;
        }

        .widgetx:hover .widget__button {
            top: 32px;
        }

        .widgetx:hover .widget__photo {
            height: 100px;
            -webkit-transform: scale(1.3);
            -moz-transform: scale(1.3);
            -ms-transform: scale(1.3);
            -o-transform: scale(1.3);
            transform: scale(1.3);
        }

        .widgetx:hover .widget__photo:after {
            opacity: 1;
        }

        .widgetx:hover .widget__overlay {
            visibility: visible;
            opacity: 1;
        }
    </style>
{% endblock %}


{% block contenu %}

    <div class="bread-crumbs-wrapper">
        <div class="container">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/" title="" itemprop="url">Home</a></li>
                <li class="breadcrumb-item active">Restaurants</li>
            </ol>
        </div>
    </div>






    <section>
        <div class="block gray-bg bottom-padd210 top-padd30">
            <div class="white-bg" style="margin: 30px;" >



                                <div class="title2-wrapper">
                                    <h3 class="marginb-0" itemprop="headline">NOS RESTAURANTS</h3>
                                </div>

                                <div class="remove-ext">

                                    <div class="row" style="display: flex;justify-content: space-between">
                                        {% for r in restaurant %}

                                            <div class="widgetx" style="margin-bottom: 20px">
                                                <div class='widget__photo'
                                                     style="background-image: url({{ asset('couvertures/'~ r.images| first) }})"></div>
                                                <div class='widget__button'>
                                                    <a href="{{ path('restaurant_showC', {'id': r.id}) }}">Plus de
                                                        details</a>
                                                </div>

                                                <div class='widget__details'>
                                                    <div class='widget__badges'>
                                                        <div class='widget__badge'>
                                                            <a href="{{ path('restaurant_like',{'id': r.id}) }}" class="btn btn-link js-like-link">
                                                                {% if app.user and r.isLikedByUser(app.user) %}
                                                                    <i class="fa fa-heart"></i>
                                                                {% else %}
                                                                    <i class="fa fa-heart-o" aria-hidden="true"></i>
                                                                {% endif %}

                                                                <div class='widget__badge widget__badge--rating'>
                                                                    <span class="js-likes">{{ r.favoris | length }}</span>

                                                                </div>
                                                               <!-- <span class="js-label">j'adore</span> -->
                                                            </a>
                                                        </div>

                                                    </div>
                                                    <div class='widget__name'>
                                                        {{ r.nom }}
                                                    </div>
                                                    <div class='widget__type'>
                                                        Restaurant, cafe
                                                    </div>
                                                    <div class='widget__info'>
        <span>
         {{ r.adresse }}
        </span>
                                                        <span>
          {{ r.heureOuverture|date("H:i") }} -  {{ r.heureFermeture|date("H:i") }}
        </span>
                                                    </div>
                                                    <div class='widget__hidden'>
                                                        <hr>
                                                        <table class='widget__table'>
                                                            <tr>
                                                                <td>
                                                                    Type
                                                                </td>
                                                                <td>
                                                                    Brunch, Lunch, Dinner
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    Alcohol
                                                                </td>
                                                                <td>
                                                                    No
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    Credit-cards
                                                                </td>
                                                                <td>
                                                                    Yes
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    Wi-Fi
                                                                </td>
                                                                <td>
                                                                    Yes
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    Outdoor Seating
                                                                </td>
                                                                <td>
                                                                    No
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>
                                </div>

                            </div>


        </div>
    </section>




{% endblock %}

{% block scripts %}

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script>
        function onClickBtnLike(event){
            event.preventDefault();
            const url = this.href;
            const icone = this.querySelector('i');

            const spanCount = this.querySelector('span.js-likes');
            axios.get(url).then(function(response){
                console.log(response);
                console.log(icone.classList.contains('fa-heart-o'));
                if(icone.classList.contains('fa-heart-o')){icone.className ="fa fa-heart";}
                else {icone.className ="fa fa-heart-o";}

                spanCount.textContent = response.data.favoris;

            }).catch(function (error){
                if(error.response.status === 403) {
                    window.alert("il faut se connecter")
                }
            });

        }
        document.querySelectorAll('a.js-like-link').forEach(function(link){
            link.addEventListener('click' , onClickBtnLike);
        })

        /*document.querySelectorAll('a.js-like-link').forEach(function (link) {
            link.addEventListener('click',function (event) {
            event.preventDefault();
            const url = this.href;
            const spanCount = this.querySelector('span.js-likes');

            axios.get(url).then(function (response) {
                console.log(response);
                spanCount.textContent = response.data.favoris;
            })



            });

        })*/

    </script>
{% endblock %}